airpnp 0.22
1 Aug 2011
README
=================

Airpnp is a simple server that acts as a bridge between AirPlay devices (such as
the iPhone or the iPad) and regular UPnP media renderers. Its mode of operation
can be summarized as follows:

* When running, detects UPnP devices on the network through M-SEARCH discovery
  and notification monitoring.
* For each MediaRenderer found, publishes an AirPlay service with the
  corresponding name.
* Converts incoming AirPlay commands to UPnP control messages which are sent to
  the media renderer.

The software is based on totem-plugin-airplay version 1.0.2, which is included.
The server parts have been rewritten to use Twisted-based networking. The
official home for the plugin is:

     http://cgit.sukimashita.com/totem-plugin-airplay.git/.

The software also uses UPnP code from pyupnp, which is included. The official
home for pyupnp is:

    http://code.google.com/p/pyupnp/


Dependencies
------------
The code has been tested with Python 2.7, but probably works with some earlier
2.x versions as well.

External dependencies include Twisted Web, Avahi, Routes and Mock (the latter
is only necessary for running tests). On a standard Ubuntu 11.04 server setup,
the following commands install the required dependencies:

    sudo apt-get install python-twisted-web python-routes python-avahi

For running tests:

    sudo apt-get install python-setuptools
    sudo easy_install mock

Version 0.7.0 of python-mock that exists in the Natty repositories is not
sufficient. As of this writing, easy_install provides version 0.8.0beta1.


Installation
------------
There is currently nothing to install. See Running below.


Configuration
-------------
Configuration is done in ~/.airpnprc, which uses a win.ini-like format. The
only supported setting at the moment is "loglevel", which can be set to an
integer from 0 to 3. The log levels mean:

0 - only twistd/Twisted logging, not recommended
1 - basic airpnp messages
2 - include detailed messages about operations
3 - include detailed messages about network communication (protocols)

A sample AIRPNPRC file is provided.


Running
-------
You *may* need to add a route for the 239 net:

    route add -net 239.0.0.0 netmask 255.0.0.0 eth0

To run airpnp, use the twistd runner. Change to the airpnp directory and issue
the following command:

    twistd -y airpnp.tac

To run in the foreground, use the following command:

    twistd -noy airpnp.tac

To run unit tests, run the following from the top-level directory:

    python run_tests.py


Contact Information
-------------------
Author: Per Roveg√•rd
Internet: http://airpnp.finkod.se
E-mail: airpnp@finkod.se


Copyright and Licensing
-----------------------
Pyupnp is licensed using the 3-clause BSD license. Totem-plugin-airplay is
licensed using the MIT license. Airpnp as a whole is licensed using the
3-clause BSD license.

See the file LICENSE for the full license text.

Changelog
---------
Version 0.22:
Updated error handling, added support for playing from all iDevice apps.

Version 0.21:
Updated this README, removed references to ~/.airpnprc

Version 0.2:
Adapted to twistd daemon, changed to use Twisted logging

Version 0.1:
First public release

